# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Multilayer

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Multilayer –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤

```
k8s/
‚îú‚îÄ‚îÄ namespace.yaml          # Namespace –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ configmap.yaml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ secret.yaml            # –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ postgres-pvc.yaml      # Persistent Volume Claim –¥–ª—è –ë–î
‚îú‚îÄ‚îÄ postgres-deployment.yaml # Deployment PostgreSQL
‚îú‚îÄ‚îÄ postgres-service.yaml  # Service PostgreSQL
‚îú‚îÄ‚îÄ app-deployment.yaml    # Deployment –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ app-service.yaml       # Service –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ ingress.yaml           # Ingress –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
‚îú‚îÄ‚îÄ deploy.sh              # –°–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ deploy-local.sh        # –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
‚îú‚îÄ‚îÄ undeploy.sh            # –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ (Docker Desktop, Minikube):
```bash
make k8s-deploy-local
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–ª–∞—Å—Ç–µ—Ä–∞:
```bash
make k8s-deploy
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
make k8s-status
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
```bash
make k8s-undeploy
```

## üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

1. **Namespace** `multilayer` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
2. **ConfigMap** —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **Secret** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
4. **PostgreSQL** —Å Persistent Volume
5. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å health checks
6. **Service** –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
7. **Ingress** –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
8. **Health check** —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health`

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Kubernetes –∫–ª–∞—Å—Ç–µ—Ä** (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π)
2. **kubectl** –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Ç–µ—Ä–æ–º
3. **Docker** –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
4. **NGINX Ingress Controller** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

- **Port Forward**: `kubectl port-forward svc/multilayer-app 8080:80 -n multilayer`
- **Ingress**: `http://multilayer.local` (—Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ /etc/hosts)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤:
- `k8s/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Kubernetes
- `DEPLOYMENT.md` - –æ–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ –ª—é–±–æ–π Kubernetes –∫–ª–∞—Å—Ç–µ—Ä! –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `make k8s-deploy-local` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ `make k8s-deploy` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞. 